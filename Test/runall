#!/usr/local/bin/rc
cd `{dirname $0}
top=`{cd ..; pwd}
. platform

# Check the status marker, ignoring comments and blank lines
awk '/^#|^$/ {next} $2 ~ /pass|fail|skip/ {next} {print "Bad status marker for " $1}' testlist.txt

# Say which ones we're skipping
echo Skipping:  `{awk '/^#/ {next} $2 ~ /skip/ {print $1 " "}' testlist.txt}

# Run the ones we expect to fail
echo 'These tests should fail....'
../Bin/$objtype/runtest '@fixheap=20000' $* -F `{awk '/^#/ {next} $2 ~ /fail/ {print $1}' testlist.txt}

# Run the ones we expect to succeed
echo 'These tests should succeed....'
../Bin/$objtype/runtest '@fixheap=20000' $* -S `{awk '/^#/ {next} $2 ~ /pass/ {print $1}' testlist.txt}
