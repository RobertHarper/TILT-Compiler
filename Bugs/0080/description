Number: 0080
Title:       Phase splitting fails on some files.
Keywords:    Phase splitter, frontend
Submitter:   David Swasey <swasey@cs.cmu.edu>
Date:        6/19/02
Version:     CVS
System:	     any
Severity:    minor
Problem:
	There exists a sequence of compilation units (part of the Basis)
	which compile fine in isolation but fail to compile when concatenated.
	The phase splitter raises an exception.
Code:
	[Supporting files in CVS prior to 1/6/04.]

	See PhasesplitBug.tar.gz
Transcript:
Comments:
	[Leaf] The issue is that the phase-splitter currently lifts
        out all the sdecs that don't have an associated sbnd and processes
        them first.  Unfortunately, this doesn't work if extern specs
        refer to types defined in the file.  

Fix:
	[Leaf] It is likely that these specs can be processed in
	order,though there are some complications having to do with
	the filtering of unused elements. 

        [Chris] When processing the components in order, remember to
        pull out as many sequential sbnds/sdecs in a row to pass to
        xsdecs, rather than processing them one at a time.  (The
        phase splitter looks for certain sequences of definitions
        or specifications generated by the elaborator, and optimizes
        them.)

	[Dave] LinkIl factors out new signature definitions; the phase
	splitter now sees a context and a well-formed sbnd:sdec pair.

Test: bug80, m0085
Owner: swasey
Status: closed
